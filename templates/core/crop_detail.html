{% extends 'base.html' %}

{% block title %}{{ crop.name }}{% endblock %}

{% block content %}
<div style="margin-top: 2rem; display: flex; justify-content: space-between; align-items: center;">
    <a href="{% url 'crop_list' %}" style="color: var(--primary-green); text-decoration: none;">&larr; Back to Crops</a>
    {% if user.is_authenticated %}
    <a href="{% url 'delete_crop' crop.pk %}" class="btn"
        style="color: #e74c3c; border: 1px solid #e74c3c; padding: 0.3rem 0.8rem; font-size: 0.9rem;">
        <i class="fas fa-trash"></i> Delete
    </a>
    {% endif %}
</div>

{% if crop %}
<div class="glass-panel" style="margin-top: 1rem; padding: 2rem;">
    <div style="display: flex; align-items: start; gap: 2rem; flex-wrap: wrap;">
        <!-- Image -->
        <div style="flex: 1; min-width: 300px;">
            {% if crop.image %}
            <img src="{{ crop.image.url }}" alt="{{ crop.name }}"
                style="width: 100%; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.3);">
            {% else %}
            <div
                style="width: 100%; height: 300px; background: rgba(0,0,0,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-seedling" style="font-size: 5rem; opacity: 0.5;"></i>
            </div>
            {% endif %}

            <!-- Smart Suggestions Box -->
            <div
                style="margin-top: 2rem; background: rgba(52, 152, 219, 0.1); border: 1px solid var(--sky-blue); padding: 1.5rem; border-radius: 12px;">
                <h3 style="color: var(--sky-blue); margin-top: 0;"><i class="fas fa-robot"></i> Smart Suggestions</h3>
                <ul style="padding-left: 1.2rem; margin-top: 1rem;">
                    {% for suggestion in suggestions %}
                    <li style="margin-bottom: 0.5rem;">{{ suggestion }}</li>
                    {% empty %}
                    <li>No specific suggestions currently.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <!-- Details -->
        <div style="flex: 1; min-width: 300px;">
            <h1 style="font-size: 2.5rem; margin-bottom: 1rem;">{{ crop.name }}</h1>
            <p style="font-size: 1.1rem; line-height: 1.6; opacity: 0.9;">{{ crop.description }}</p>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 2rem;">
                <div class="glass-panel" style="padding: 1rem; text-align: center;">
                    <i class="fas fa-thermometer-half"
                        style="color: #e74c3c; font-size: 1.5rem; margin-bottom: 0.5rem;"></i>
                    <div style="font-weight: bold;">Temp. Range</div>
                    <div>{{ crop.optimal_temp_min }} - {{ crop.optimal_temp_max }}Â°C</div>
                </div>
                <div class="glass-panel" style="padding: 1rem; text-align: center;">
                    <i class="fas fa-tint"
                        style="color: var(--sky-blue); font-size: 1.5rem; margin-bottom: 0.5rem;"></i>
                    <div style="font-weight: bold;">Water Needs</div>
                    <div>{{ crop.water_requirement }}</div>
                </div>
                <div class="glass-panel" style="padding: 1rem; text-align: center;">
                    <i class="fas fa-layer-group" style="color: #f39c12; font-size: 1.5rem; margin-bottom: 0.5rem;"></i>
                    <div style="font-weight: bold;">Soil Type</div>
                    <div>{{ crop.soil_type }}</div>
                </div>
            </div>

            <h3 style="margin-top: 3rem; border-bottom: 1px solid var(--glass-border); padding-bottom: 0.5rem;">Farming
                Guide</h3>

            <div style="margin-top: 1.5rem;">
                <h4 style="color: var(--primary-green);"><i class="fas fa-flask"></i> Recommended Fertilizers</h4>
                <p>{{ crop.fertilizers|default:"No specific recommendations." }}</p>
            </div>

            <div style="margin-top: 1.5rem;">
                <h4 style="color: #8e44ad;"><i class="fas fa-poop"></i> Manures</h4>
                <p>{{ crop.manures|default:"No specific recommendations." }}</p>
            </div>

            <div style="margin-top: 1.5rem;">
                <h4 style="color: #c0392b;"><i class="fas fa-bug"></i> Pesticides</h4>
                <p>{{ crop.pesticides|default:"No specific recommendations." }}</p>
            </div>
        </div>
    </div>
</div>
{% else %}
<p>Crop not found.</p>
{% endif %}
{% endblock %}